spring.application.name=terra-gateway
server.port=8000

# Gateway Routes Configuration
spring.cloud.gateway.routes[0].id=terra-sense-route
spring.cloud.gateway.routes[0].uri=http://terra-sense:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/sense/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=2
spring.cloud.gateway.routes[0].filters[1]=name=RequestRateLimiter
spring.cloud.gateway.routes[0].filters[1].args.redis-rate-limiter.replenishRate=10
spring.cloud.gateway.routes[0].filters[1].args.redis-rate-limiter.burstCapacity=20

spring.cloud.gateway.routes[1].id=terra-cortex-route
spring.cloud.gateway.routes[1].uri=http://terra-cortex:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/cortex/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[2].id=terra-ops-route
spring.cloud.gateway.routes[2].uri=http://terra-ops:8080
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/ops/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=2
spring.cloud.gateway.routes[2].filters[1]=name=RequestRateLimiter
spring.cloud.gateway.routes[2].filters[1].args.redis-rate-limiter.replenishRate=20
spring.cloud.gateway.routes[2].filters[1].args.redis-rate-limiter.burstCapacity=50

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}

# CORS Configuration
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true

# Actuator
management.endpoints.web.exposure.include=health,info,prometheus,gateway
management.endpoint.health.show-details=always

# Logging
logging.level.org.springframework.cloud.gateway=DEBUG
